==== Starting backend-customer-portal - Fri Nov 28 10:47:01 UTC 2025 ====
Requirement already satisfied: pip in ./backend-customer-portal/.venv/lib/python3.12/site-packages (25.3)
Requirement already satisfied: aio-pika==9.5.8 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 1)) (9.5.8)
Requirement already satisfied: aiormq==6.9.2 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 2)) (6.9.2)
Requirement already satisfied: annotated-doc==0.0.4 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 3)) (0.0.4)
Requirement already satisfied: annotated-types==0.7.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: anyio==4.11.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 5)) (4.11.0)
Requirement already satisfied: APScheduler==3.11.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 6)) (3.11.1)
Requirement already satisfied: argon2-cffi==25.1.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 7)) (25.1.0)
Requirement already satisfied: argon2-cffi-bindings==25.1.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 8)) (25.1.0)
Requirement already satisfied: asyncpg==0.30.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 9)) (0.30.0)
Requirement already satisfied: certifi==2025.11.12 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 10)) (2025.11.12)
Requirement already satisfied: cffi==2.0.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 11)) (2.0.0)
Requirement already satisfied: click==8.3.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 12)) (8.3.1)
Requirement already satisfied: colorama==0.4.6 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 13)) (0.4.6)
Requirement already satisfied: cryptography==46.0.3 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 14)) (46.0.3)
Requirement already satisfied: Deprecated==1.3.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 15)) (1.3.1)
Requirement already satisfied: dnspython==2.8.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 16)) (2.8.0)
Requirement already satisfied: ecdsa==0.19.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 17)) (0.19.1)
Requirement already satisfied: email-validator==2.3.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 18)) (2.3.0)
Requirement already satisfied: fastapi==0.121.3 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 19)) (0.121.3)
Requirement already satisfied: h11==0.16.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 20)) (0.16.0)
Requirement already satisfied: hiredis==3.3.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 21)) (3.3.0)
Requirement already satisfied: httpcore==1.0.9 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 22)) (1.0.9)
Requirement already satisfied: httptools==0.7.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 23)) (0.7.1)
Requirement already satisfied: httpx==0.28.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 24)) (0.28.1)
Requirement already satisfied: idna==3.11 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 25)) (3.11)
Requirement already satisfied: itsdangerous==2.2.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 26)) (2.2.0)
Requirement already satisfied: limits==5.6.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 27)) (5.6.0)
Requirement already satisfied: minio==7.2.16 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 28)) (7.2.16)
Requirement already satisfied: motor==3.7.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 29)) (3.7.1)
Requirement already satisfied: multidict==6.7.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 30)) (6.7.0)
Requirement already satisfied: packaging==25.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 31)) (25.0)
Requirement already satisfied: pamqp==3.3.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 32)) (3.3.0)
Requirement already satisfied: propcache==0.4.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 33)) (0.4.1)
Requirement already satisfied: pyasn1==0.6.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 34)) (0.6.1)
Requirement already satisfied: pycparser==2.23 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 35)) (2.23)
Requirement already satisfied: pycryptodome==3.23.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 36)) (3.23.0)
Requirement already satisfied: pydantic==2.12.4 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 37)) (2.12.4)
Requirement already satisfied: pydantic-settings==2.12.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 38)) (2.12.0)
Requirement already satisfied: pydantic_core==2.41.5 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 39)) (2.41.5)
Requirement already satisfied: pymongo==4.15.4 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 40)) (4.15.4)
Requirement already satisfied: python-dotenv==1.2.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 41)) (1.2.1)
Requirement already satisfied: python-jose==3.5.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 42)) (3.5.0)
Requirement already satisfied: python-multipart==0.0.20 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 43)) (0.0.20)
Requirement already satisfied: PyYAML==6.0.3 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 44)) (6.0.3)
Requirement already satisfied: redis==7.1.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 45)) (7.1.0)
Requirement already satisfied: rsa==4.9.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 46)) (4.9.1)
Requirement already satisfied: six==1.17.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 47)) (1.17.0)
Requirement already satisfied: slowapi==0.1.9 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 48)) (0.1.9)
Requirement already satisfied: sniffio==1.3.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 49)) (1.3.1)
Requirement already satisfied: starlette==0.50.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 50)) (0.50.0)
Requirement already satisfied: typing-inspection==0.4.2 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 51)) (0.4.2)
Requirement already satisfied: typing_extensions==4.15.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 52)) (4.15.0)
Requirement already satisfied: tzdata==2025.2 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 53)) (2025.2)
Requirement already satisfied: tzlocal==5.3.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 54)) (5.3.1)
Requirement already satisfied: urllib3==2.5.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 55)) (2.5.0)
Requirement already satisfied: uvicorn==0.38.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 56)) (0.38.0)
Requirement already satisfied: watchfiles==1.1.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 57)) (1.1.1)
Requirement already satisfied: websockets==15.0.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 58)) (15.0.1)
Requirement already satisfied: wrapt==2.0.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 59)) (2.0.1)
Requirement already satisfied: yarl==1.22.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 60)) (1.22.0)
[backend-customer-portal] Starting uvicorn on port 9901
INFO:     Will watch for changes in these directories: ['/home/sahaj/sahaj-os/services/backend-customer-portal']
INFO:     Uvicorn running on http://0.0.0.0:9901 (Press CTRL+C to quit)
INFO:     Started reloader process [2067088] using WatchFiles
INFO:     Started server process [2067099]
INFO:     Waiting for application startup.
2025-11-28 10:47:03,458 - INFO - backend-customer-portal - Logging initialized
2025-11-28 10:47:03,458 - INFO - backend-customer-portal - Starting application...
2025-11-28 10:47:03,465 - INFO - backend-customer-portal - Attempting to connect to KeyDB node 127.0.0.1:6333...
2025-11-28 10:47:03,467 - INFO - backend-customer-portal - Connected to KeyDB node 127.0.0.1:6333 successfully!
2025-11-28 10:47:03,467 - INFO - backend-customer-portal - KeyDB client is ready to use.
2025-11-28 10:47:03,474 - INFO - backend-customer-portal - Connecting to MinIO S3...
2025-11-28 10:47:03,474 - INFO - backend-customer-portal - Connected to MinIO S3.
2025-11-28 10:47:03,486 - INFO - backend-customer-portal - Initializing RabbitMQ pool with 5 connections...
2025-11-28 10:47:03,497 - ERROR - backend-customer-portal - Failed to connect to RabbitMQ: ("one of ['Connection.OpenOk']", <Connection.Close object at 0x72adfad3d0e0>)
2025-11-28 10:47:03,498 - ERROR - backend-customer-portal - Application startup failed: ("one of ['Connection.OpenOk']", <Connection.Close object at 0x72adfad3d0e0>)
Traceback (most recent call last):
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/app/main.py", line 57, in lifespan
    await rabbitmq_pool.init_pool()
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/app/db/rabbitmq.py", line 88, in init_pool
    conn, channel = await self._create_connection()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/app/db/rabbitmq.py", line 66, in _create_connection
    connection = await aio_pika.connect_robust(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/robust_connection.py", line 334, in connect_robust
    await connection.connect(timeout=timeout)
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/robust_connection.py", line 180, in connect
    await self.__fail_fast_future
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/robust_connection.py", line 135, in __connection_factory
    await Connection.connect(self, self.__connect_timeout)
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/connection.py", line 125, in connect
    self.transport = await UnderlayConnection.connect(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/abc.py", line 679, in connect
    connection = await cls.make_connection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/abc.py", line 667, in make_connection
    connection: aiormq.abc.AbstractConnection = await asyncio.wait_for(
                                                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/connection.py", line 1014, in connect
    await connection.connect(client_properties or {})
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/abc.py", line 46, in __inner
    raise self._exception from e
  File "/usr/lib/python3.12/asyncio/tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/abc.py", line 46, in __inner
    raise self._exception from e
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/connection.py", line 601, in connect
    frame = await self._rpc(
            ^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/connection.py", line 522, in _rpc
    raise AMQPInternalError(
pamqp.exceptions.AMQPInternalError: ("one of ['Connection.OpenOk']", <Connection.Close object at 0x72adfad3d0e0>)
ERROR:    Traceback (most recent call last):
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/starlette/routing.py", line 694, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 211, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/app/main.py", line 57, in lifespan
    await rabbitmq_pool.init_pool()
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/app/db/rabbitmq.py", line 88, in init_pool
    conn, channel = await self._create_connection()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/app/db/rabbitmq.py", line 66, in _create_connection
    connection = await aio_pika.connect_robust(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/robust_connection.py", line 334, in connect_robust
    await connection.connect(timeout=timeout)
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/robust_connection.py", line 180, in connect
    await self.__fail_fast_future
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/robust_connection.py", line 135, in __connection_factory
    await Connection.connect(self, self.__connect_timeout)
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/connection.py", line 125, in connect
    self.transport = await UnderlayConnection.connect(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/abc.py", line 679, in connect
    connection = await cls.make_connection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aio_pika/abc.py", line 667, in make_connection
    connection: aiormq.abc.AbstractConnection = await asyncio.wait_for(
                                                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/connection.py", line 1014, in connect
    await connection.connect(client_properties or {})
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/abc.py", line 46, in __inner
    raise self._exception from e
  File "/usr/lib/python3.12/asyncio/tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/abc.py", line 46, in __inner
    raise self._exception from e
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/connection.py", line 601, in connect
    frame = await self._rpc(
            ^^^^^^^^^^^^^^^^
  File "/home/sahaj/sahaj-os/services/backend-customer-portal/.venv/lib/python3.12/site-packages/aiormq/connection.py", line 522, in _rpc
    raise AMQPInternalError(
pamqp.exceptions.AMQPInternalError: ("one of ['Connection.OpenOk']", <Connection.Close object at 0x72adfad3d0e0>)

ERROR:    Application startup failed. Exiting.
WARNING:  WatchFiles detected changes in 'app/db/rabbitmq.py'. Reloading...
INFO:     Started server process [2074598]
INFO:     Waiting for application startup.
2025-11-28 10:56:14,004 - INFO - backend-customer-portal - Logging initialized
2025-11-28 10:56:14,004 - INFO - backend-customer-portal - Starting application...
2025-11-28 10:56:14,016 - INFO - backend-customer-portal - Attempting to connect to KeyDB node 127.0.0.1:6333...
2025-11-28 10:56:14,017 - INFO - backend-customer-portal - Connected to KeyDB node 127.0.0.1:6333 successfully!
2025-11-28 10:56:14,017 - INFO - backend-customer-portal - KeyDB client is ready to use.
2025-11-28 10:56:14,020 - INFO - backend-customer-portal - Connecting to MinIO S3...
2025-11-28 10:56:14,020 - INFO - backend-customer-portal - Connected to MinIO S3.
2025-11-28 10:56:14,024 - INFO - backend-customer-portal - Initializing RabbitMQ pool with 5 connections...
2025-11-28 10:56:14,083 - INFO - backend-customer-portal - RabbitMQ pool initialized successfully!
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/db/rabbitmq.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-28 10:57:47,791 - INFO - backend-customer-portal - Closing all connections in the pool...
2025-11-28 10:57:47,793 - INFO - backend-customer-portal - RabbitMQ connections closed!
2025-11-28 10:57:47,795 - INFO - backend-customer-portal - Shutting down application...
INFO:     Application shutdown complete.
INFO:     Finished server process [2074598]
INFO:     Started server process [2075790]
INFO:     Waiting for application startup.
2025-11-28 10:57:48,327 - INFO - backend-customer-portal - Logging initialized
2025-11-28 10:57:48,327 - INFO - backend-customer-portal - Starting application...
2025-11-28 10:57:48,335 - INFO - backend-customer-portal - Attempting to connect to KeyDB node 127.0.0.1:6333...
2025-11-28 10:57:48,336 - INFO - backend-customer-portal - Connected to KeyDB node 127.0.0.1:6333 successfully!
2025-11-28 10:57:48,336 - INFO - backend-customer-portal - KeyDB client is ready to use.
2025-11-28 10:57:48,339 - INFO - backend-customer-portal - Connecting to MinIO S3...
2025-11-28 10:57:48,339 - INFO - backend-customer-portal - Connected to MinIO S3.
2025-11-28 10:57:48,344 - INFO - backend-customer-portal - Initializing RabbitMQ pool with 5 connections...
2025-11-28 10:57:48,395 - INFO - backend-customer-portal - RabbitMQ pool initialized successfully!
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/db/rabbitmq.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-28 10:57:55,714 - INFO - backend-customer-portal - Closing all connections in the pool...
2025-11-28 10:57:55,716 - INFO - backend-customer-portal - RabbitMQ connections closed!
2025-11-28 10:57:55,718 - INFO - backend-customer-portal - Shutting down application...
INFO:     Application shutdown complete.
INFO:     Finished server process [2075790]
INFO:     Started server process [2075889]
INFO:     Waiting for application startup.
2025-11-28 10:57:56,211 - INFO - backend-customer-portal - Logging initialized
2025-11-28 10:57:56,211 - INFO - backend-customer-portal - Starting application...
2025-11-28 10:57:56,217 - INFO - backend-customer-portal - Attempting to connect to KeyDB node 127.0.0.1:6333...
2025-11-28 10:57:56,218 - INFO - backend-customer-portal - Connected to KeyDB node 127.0.0.1:6333 successfully!
2025-11-28 10:57:56,218 - INFO - backend-customer-portal - KeyDB client is ready to use.
2025-11-28 10:57:56,221 - INFO - backend-customer-portal - Connecting to MinIO S3...
2025-11-28 10:57:56,221 - INFO - backend-customer-portal - Connected to MinIO S3.
2025-11-28 10:57:56,226 - INFO - backend-customer-portal - Initializing RabbitMQ pool with 5 connections...
2025-11-28 10:57:56,283 - INFO - backend-customer-portal - RabbitMQ pool initialized successfully!
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/db/rabbitmq.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-28 10:58:10,516 - INFO - backend-customer-portal - Closing all connections in the pool...
2025-11-28 10:58:10,518 - INFO - backend-customer-portal - RabbitMQ connections closed!
2025-11-28 10:58:10,520 - INFO - backend-customer-portal - Shutting down application...
INFO:     Application shutdown complete.
INFO:     Finished server process [2075889]
INFO:     Started server process [2076118]
INFO:     Waiting for application startup.
2025-11-28 10:58:11,021 - INFO - backend-customer-portal - Logging initialized
2025-11-28 10:58:11,021 - INFO - backend-customer-portal - Starting application...
2025-11-28 10:58:11,027 - INFO - backend-customer-portal - Attempting to connect to KeyDB node 127.0.0.1:6333...
2025-11-28 10:58:11,029 - INFO - backend-customer-portal - Connected to KeyDB node 127.0.0.1:6333 successfully!
2025-11-28 10:58:11,029 - INFO - backend-customer-portal - KeyDB client is ready to use.
2025-11-28 10:58:11,032 - INFO - backend-customer-portal - Connecting to MinIO S3...
2025-11-28 10:58:11,032 - INFO - backend-customer-portal - Connected to MinIO S3.
2025-11-28 10:58:11,036 - INFO - backend-customer-portal - Initializing RabbitMQ pool with 5 connections...
2025-11-28 10:58:11,088 - INFO - backend-customer-portal - RabbitMQ pool initialized successfully!
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-28 10:58:21,813 - INFO - backend-customer-portal - Closing all connections in the pool...
2025-11-28 10:58:21,816 - INFO - backend-customer-portal - RabbitMQ connections closed!
2025-11-28 10:58:21,818 - INFO - backend-customer-portal - Shutting down application...
INFO:     Application shutdown complete.
INFO:     Finished server process [2076118]
INFO:     Stopping reloader process [2067088]
==== Starting backend-customer-portal - Fri Nov 28 10:58:53 UTC 2025 ====
Requirement already satisfied: pip in ./backend-customer-portal/.venv/lib/python3.12/site-packages (25.3)
Requirement already satisfied: aio-pika==9.5.8 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 1)) (9.5.8)
Requirement already satisfied: aiormq==6.9.2 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 2)) (6.9.2)
Requirement already satisfied: annotated-doc==0.0.4 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 3)) (0.0.4)
Requirement already satisfied: annotated-types==0.7.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: anyio==4.11.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 5)) (4.11.0)
Requirement already satisfied: APScheduler==3.11.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 6)) (3.11.1)
Requirement already satisfied: argon2-cffi==25.1.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 7)) (25.1.0)
Requirement already satisfied: argon2-cffi-bindings==25.1.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 8)) (25.1.0)
Requirement already satisfied: asyncpg==0.30.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 9)) (0.30.0)
Requirement already satisfied: certifi==2025.11.12 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 10)) (2025.11.12)
Requirement already satisfied: cffi==2.0.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 11)) (2.0.0)
Requirement already satisfied: click==8.3.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 12)) (8.3.1)
Requirement already satisfied: colorama==0.4.6 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 13)) (0.4.6)
Requirement already satisfied: cryptography==46.0.3 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 14)) (46.0.3)
Requirement already satisfied: Deprecated==1.3.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 15)) (1.3.1)
Requirement already satisfied: dnspython==2.8.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 16)) (2.8.0)
Requirement already satisfied: ecdsa==0.19.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 17)) (0.19.1)
Requirement already satisfied: email-validator==2.3.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 18)) (2.3.0)
Requirement already satisfied: fastapi==0.121.3 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 19)) (0.121.3)
Requirement already satisfied: h11==0.16.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 20)) (0.16.0)
Requirement already satisfied: hiredis==3.3.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 21)) (3.3.0)
Requirement already satisfied: httpcore==1.0.9 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 22)) (1.0.9)
Requirement already satisfied: httptools==0.7.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 23)) (0.7.1)
Requirement already satisfied: httpx==0.28.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 24)) (0.28.1)
Requirement already satisfied: idna==3.11 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 25)) (3.11)
Requirement already satisfied: itsdangerous==2.2.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 26)) (2.2.0)
Requirement already satisfied: limits==5.6.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 27)) (5.6.0)
Requirement already satisfied: minio==7.2.16 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 28)) (7.2.16)
Requirement already satisfied: motor==3.7.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 29)) (3.7.1)
Requirement already satisfied: multidict==6.7.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 30)) (6.7.0)
Requirement already satisfied: packaging==25.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 31)) (25.0)
Requirement already satisfied: pamqp==3.3.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 32)) (3.3.0)
Requirement already satisfied: propcache==0.4.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 33)) (0.4.1)
Requirement already satisfied: pyasn1==0.6.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 34)) (0.6.1)
Requirement already satisfied: pycparser==2.23 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 35)) (2.23)
Requirement already satisfied: pycryptodome==3.23.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 36)) (3.23.0)
Requirement already satisfied: pydantic==2.12.4 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 37)) (2.12.4)
Requirement already satisfied: pydantic-settings==2.12.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 38)) (2.12.0)
Requirement already satisfied: pydantic_core==2.41.5 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 39)) (2.41.5)
Requirement already satisfied: pymongo==4.15.4 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 40)) (4.15.4)
Requirement already satisfied: python-dotenv==1.2.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 41)) (1.2.1)
Requirement already satisfied: python-jose==3.5.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 42)) (3.5.0)
Requirement already satisfied: python-multipart==0.0.20 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 43)) (0.0.20)
Requirement already satisfied: PyYAML==6.0.3 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 44)) (6.0.3)
Requirement already satisfied: redis==7.1.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 45)) (7.1.0)
Requirement already satisfied: rsa==4.9.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 46)) (4.9.1)
Requirement already satisfied: six==1.17.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 47)) (1.17.0)
Requirement already satisfied: slowapi==0.1.9 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 48)) (0.1.9)
Requirement already satisfied: sniffio==1.3.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 49)) (1.3.1)
Requirement already satisfied: starlette==0.50.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 50)) (0.50.0)
Requirement already satisfied: typing-inspection==0.4.2 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 51)) (0.4.2)
Requirement already satisfied: typing_extensions==4.15.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 52)) (4.15.0)
Requirement already satisfied: tzdata==2025.2 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 53)) (2025.2)
Requirement already satisfied: tzlocal==5.3.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 54)) (5.3.1)
Requirement already satisfied: urllib3==2.5.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 55)) (2.5.0)
Requirement already satisfied: uvicorn==0.38.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 56)) (0.38.0)
Requirement already satisfied: watchfiles==1.1.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 57)) (1.1.1)
Requirement already satisfied: websockets==15.0.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 58)) (15.0.1)
Requirement already satisfied: wrapt==2.0.1 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 59)) (2.0.1)
Requirement already satisfied: yarl==1.22.0 in ./backend-customer-portal/.venv/lib/python3.12/site-packages (from -r /home/sahaj/sahaj-os/services/backend-customer-portal/requirements.txt (line 60)) (1.22.0)
[backend-customer-portal] Starting uvicorn on port 9901
INFO:     Will watch for changes in these directories: ['/home/sahaj/sahaj-os/services/backend-customer-portal']
INFO:     Uvicorn running on http://0.0.0.0:9901 (Press CTRL+C to quit)
INFO:     Started reloader process [2091156] using WatchFiles
INFO:     Started server process [2091167]
INFO:     Waiting for application startup.
2025-11-28 10:58:56,215 - INFO - backend-customer-portal - Logging initialized
2025-11-28 10:58:56,216 - INFO - backend-customer-portal - Starting application...
2025-11-28 10:58:56,231 - INFO - backend-customer-portal - Attempting to connect to KeyDB node 127.0.0.1:6333...
2025-11-28 10:58:56,236 - INFO - backend-customer-portal - Connected to KeyDB node 127.0.0.1:6333 successfully!
2025-11-28 10:58:56,236 - INFO - backend-customer-portal - KeyDB client is ready to use.
2025-11-28 10:58:56,244 - INFO - backend-customer-portal - Connecting to MinIO S3...
2025-11-28 10:58:56,246 - INFO - backend-customer-portal - Connected to MinIO S3.
2025-11-28 10:58:56,258 - INFO - backend-customer-portal - Initializing RabbitMQ pool with 5 connections...
2025-11-28 10:58:56,269 - ERROR - backend-customer-portal - Failed to connect to RabbitMQ: ("one of ['Connection.OpenOk']", <Connection.Close object at 0x77fa19247020>) - Retry 1/10
2025-11-28 10:59:56,323 - INFO - backend-customer-portal - RabbitMQ pool initialized successfully!
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-11-28 11:00:35,183 - INFO - backend-customer-portal - Closing all connections in the pool...
2025-11-28 11:00:35,185 - INFO - backend-customer-portal - RabbitMQ connections closed!
2025-11-28 11:00:35,188 - INFO - backend-customer-portal - Shutting down application...
INFO:     Application shutdown complete.
INFO:     Finished server process [2091167]
INFO:     Stopping reloader process [2091156]
